<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Route Topo</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="_csrf" th:content="${_csrf.token}"/>
	<meta name="_csrf_header" th:content="${_csrf.headerName}"/>
    <link rel="icon" type="image/png" href="/images/logo.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
    <script src='/js/mainLayout.js' type='module' defer></script>
</head>
<body class="flex flex-col min-h-screen">
    <header class="sticky top-0 bg-gray-100 shadow-md z-50">
	    <nav class="mx-auto flex max-w-7xl items-center p-4 md:p-6 lg:px-8 relative" aria-label="Global">
		    <div class="absolute left-0 top-0 p-4 md:p-6 lg:pl-8 z-10">
	            <a href="/" class="block">
	                <img th:src="@{/images/logo.png}" alt="Logo" class="h-12 w-auto" />
	            </a>
	        </div>
	        <div class="flex-grow flex items-center justify-end md:justify-start ml-[160px] md:ml-[200px]">
		        <div class="flex md:hidden items-center">
		            <button id="mobile-menu-button" class="p-2 rounded-md text-gray-900 hover:text-gray-700">
		                <span class="sr-only">Open main menu</span>
		                <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
		                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
		                </svg>
		            </button>
		        </div>
		
		        <div class="hidden md:flex flex-wrap flex-grow gap-4 mb-4 md:mb-0 text-center md:text-left">
		            <a href="/areas" class="text-sm font-semibold text-gray-900 hover:text-gray-700">Zone de cățărat</a>
		            <a href="/routes" class="text-sm font-semibold text-gray-900 hover:text-gray-700">Ultimele trasee adăugate</a>
		            <a href="/add-route" sec:authorize="isAuthenticated()" class="text-sm font-semibold text-gray-900 hover:text-gray-700">Adaugă traseu</a>
		        </div>
	        </div>
	
	        <div class="hidden md:flex gap-2 md:gap-4 justify-center md:justify-start">
	        	<span sec:authorize="isAuthenticated()" class="inline-flex items-center">
		        	<span sec:authorize="hasRole('ROLE_ADMIN')" class="text-xs font-medium text-gray-500">Hello Admin,</span>
	    			<span sec:authorize="!hasRole('ROLE_ADMIN')" class="text-xs font-medium text-gray-500">
	    				Hello,
	    				<span th:text="${#strings.capitalize(#authentication.principal.username)}"></span> 
	    			</span>
	        	</span>
	            <a href="/login" sec:authorize="isAnonymous()" class="inline-block px-3 py-2 bg-gray-200 text-sm rounded-lg font-semibold text-gray-900 hover:bg-gray-50 hover:text-gray-700">Login</a>
	            <a href="/logout" sec:authorize="isAuthenticated()" class="inline-block px-3 py-2 bg-gray-200 text-sm rounded-lg font-semibold text-gray-900 hover:bg-gray-50 hover:text-gray-700">Logout</a>
	        </div>
	    </nav>
	</header>
	
	<div id="mobile-menu" class="fixed inset-0 bg-gray-100 shadow-lg hidden md:hidden">
	    <div class="h-full flex flex-col justify-center items-center space-y-4">
		    <button id="close-menu" class="absolute top-4 right-4 text-gray-900 hover:text-gray-700 focus:outline-none">&times;</button>
	        <a href="/areas" class="text-sm font-semibold py-px text-gray-900 hover:bg-gray-200 hover:text-gray-700">Zone de cățărat</a>
	        <a href="/routes" class="text-sm font-semibold py-px  text-gray-900 hover:bg-gray-200 hover:text-gray-700">Ultimele trasee adăugate</a>
	        <a href="/add-route" sec:authorize="isAuthenticated()" class="text-sm font-semibold py-px text-gray-900 hover:bg-gray-200 hover:text-gray-700">Adaugă traseu</a>
	        <a href="/login" sec:authorize="isAnonymous()" class="inline-block px-3 py-2 bg-gray-200 text-sm rounded-lg font-semibold text-gray-900 hover:bg-gray-50 hover:text-gray-700">Login</a>
	        <a href="/logout" sec:authorize="isAuthenticated()" class="inline-block px-3 py-2 bg-gray-200 text-sm rounded-lg font-semibold text-gray-900 hover:bg-gray-50 hover:text-gray-700">Logout</a>
	    </div>
	</div>
	
    <main class="flex-grow bg-white px-4 md:px-6 lg:px-8 py-4 md:py-6">
        <div th:replace="~{${body}}"></div>
    </main>
    
    <footer class="bg-gray-100 border-t border-gray-200 py-4 md:py-6">
        <div class="mx-auto max-w-7xl px-4 md:px-6 lg:px-8 flex justify-between items-center">
            <p class="text-center text-sm text-gray-600">
                Copyright © 2025 <span class="font-semibold">Route Topo</span>. Developed by <a href="https://cosminnicola.onrender.com/" target="_blank">Cosmin Nicola</a>.
            </p>
            <button id="dark-mode-toggle" type="button" class="inline-block px-3 py-2 bg-gray-200 text-sm rounded-lg font-semibold text-gray-900 hover:bg-gray-50 hover:text-gray-700">
			    Dark Mode
			</button>
        </div>
    </footer>
</body>
</html>